<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOSLA - Modular Open Services License Agreement</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { padding-top: 20px; }
        .hero-section { text-align: center; padding: 50px 0; background-color: #f8f9fa; }
        .hero-section h1 { margin-bottom: 20px; }
        .hero-section p { margin-bottom: 30px; font-size: 1.25rem; }
        .section { padding: 40px 0; }
        .section h2 { text-align: center; margin-bottom: 40px; }
        .footer { text-align: center; padding: 20px 0; background-color: #343a40; color: white; }
        .logo { max-width: 100px; margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="hero-section">
            <img src="./icon/MOSLA.png" alt="MOSLA Logo" class="logo">
            <h1>Welcome to MOSLA</h1>
            <p class="lead">The Modular Open Services License Agreement framework simplifies how we create and understand service agreements.</p>
            <a href="./MOSLA.html?terms=demo" class="btn btn-primary btn-lg">See a Demo</a>
        </div>

        <div class="section" id="about">
            <h2>What is MOSLA?</h2>
            <div class="row">
                <div class="col-md-6">
                    <p>MOSLA offers a standardized, component-based approach to service agreements. Instead of dense, hard-to-read documents, MOSLA breaks down agreements into understandable clauses. Each clause has fixed attributes, making it easy to grasp the terms quickly.</p>
                    <p>This innovative approach means agreements can be fully described and shared via a URL. For example: <code>./MOSLA.html?clauses=A1.02+C14.02+D01.11&party1=John.Smith&party2=ABCorp</code> (Note: parameters like 'clauses' are illustrative; the demo uses 'terms').</p>
                </div>
                <div class="col-md-6">
                    <img src="https://via.placeholder.com/450x250" alt="MOSLA Concept" class="img-fluid rounded">
                    <p class="text-center mt-2"><em>(Imagine a diagram here illustrating how clauses form an agreement)</em></p>
                </div>
            </div>
        </div>

        <div class="section bg-light" id="features">
            <h2>Key Benefits of MOSLA</h2>
            <div class="row">
                <div class="col-md-4">
                    <h4>Standardization</h4>
                    <p>MOSLA promotes clear, industry-vetted clauses. This standardization simplifies understanding and reduces ambiguity in legal agreements.</p>
                </div>
                <div class="col-md-4">
                    <h4>URL-Based Agreements</h4>
                    <p>Easily share and reference complete agreements using a simple URL. This is perfect for online services and digital contracts, ensuring both parties have a clear record.</p>
                </div>
                <div class="col-md-4">
                    <h4>Traceability & Community</h4>
                    <p>As clauses are updated or face legal scrutiny, the reasoning and outcomes can be shared. This community-driven approach helps refine and improve the framework over time.</p>
                </div>
            </div>
        </div>

        <div class="section" id="usage">
            <h2>How to Use MOSLA</h2>
            <p class="text-center lead">MOSLA is designed for any company or individual seeking a transparent and standardized way to manage service agreements.</p>
            <div class="row">
                <div class="col-md-6">
                    <p>When setting up an End User License Agreement (EULA) or service terms page, you can link to a MOSLA-generated agreement. This link, containing the specific clauses and party details, can also be emailed to clients, providing them with a stable and verifiable copy of their agreement.</p>
                </div>
                <div class="col-md-6">
                    <p>The framework is built to be adaptable. While custom clauses are managed through a community approval process to maintain standardization, the existing library of clauses covers a wide range of common scenarios in web and application services.</p>
                </div>
            </div>
             <p class="text-center mt-4">
                <a href="https://github.com/deftio/mosla" class="btn btn-info">Learn More on GitHub</a>
            </p>
        </div>

        <div class="section" id="clauses">
            <h2>Understanding MOSLA Clauses</h2>
            <p class="lead text-center">MOSLA's flexibility comes from its modular clauses. Here's how they are structured and used.</p>
            <div class="row">
                <div class="col-md-12">
                    <h4>The Anatomy of a Clause</h4>
                    <p>Clauses are defined within a central file, <code>mosla-terms.json</code>. This file acts as a repository for all standardized clauses. While end-users typically select from existing, approved clauses, understanding their structure is key to leveraging MOSLA effectively or proposing new clauses to the community.</p>
                    <p>Each clause object generally contains the following key fields:</p>
                    <pre class="bg-dark text-light p-3 rounded"><code>{
    "clause-name": "Human-readable title of the clause",
    "clause-ID": "A unique identifier for the clause (e.g., A1, B2.1)",
    "clause-version": "Specific version of the clause (e.g., 01x1, 1.0)",
    "clause-short-desc": "A concise summary of the clause's intent.",
    "clause-long-desc": "The full legal text and detailed explanation of the clause."
}</code></pre>
                    <p>For example, if you wanted to propose a new clause about data privacy, you would structure your proposal with these fields, clearly defining what the clause covers and its unique ID.</p>
                </div>
            </div>
            <div class="row mt-4">
                <div class="col-md-12">
                    <h4>Using Clauses in a URL</h4>
                    <p>One of MOSLA's powerful features is the ability to construct an agreement by referencing clause IDs in a URL. The <code>terms</code> parameter (as used in the demo) in the URL is used to specify a list of clause IDs, separated by a plus sign (<code>+</code>).</p>
                    <p>For instance, to create an agreement that includes clauses <code>A1</code>, <code>C2.3</code>, and <code>D5</code>, your URL might look like this:</p>
                    <p class="text-center">
                        <a href="./MOSLA.html?terms=A1+C2.3+D5" class="btn btn-secondary" target="_blank"><code>./MOSLA.html?terms=A1+C2.3+D5</code></a>
                    </p>
                    <p>This URL directly links to a version of the MOSLA agreement page (like the demo) that dynamically loads and displays the specified clauses. This makes sharing and referencing agreements incredibly straightforward. You can experiment by modifying the <code>terms</code> in the demo URL with clause IDs found in <code>mosla-terms.json</code>.</p>
                    <p>Other parameters, such as <code>party1</code> and <code>party2</code>, can also be added to the URL to further customize the agreement (e.g., <code>./MOSLA.html?terms=A1+C2.3&party1=MyCompany&party2=YourName</code>). The exact parameter names (like 'clauses' vs 'terms') can be specific to the MOSLA implementation you are using.</p>
                </div>
            </div>
        </div>

        <div class="section" id="clause-generator">
            <h2>MOSLA Clause Library & URL Generator</h2>
            <p class="lead text-center">Select clauses from the library, enter party names, and generate a shareable MOSLA URL.</p>
            
            <div id="clause-load-error" class="alert alert-danger" style="display:none;"></div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="party1-name">Party 1 Name:</label>
                        <input type="text" class="form-control" id="party1-name" value="YourCompany">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="party2-name">Party 2 Name:</label>
                        <input type="text" class="form-control" id="party2-name" value="YourClient">
                    </div>
                </div>
            </div>

            <div class="form-group form-check mb-3">
                <input type="checkbox" class="form-check-input" id="select-all-clauses">
                <label class="form-check-label" for="select-all-clauses">Select/Deselect All Clauses</label>
            </div>

            <div id="clause-library-display" class="row">
                <!-- Clauses will be loaded here by JavaScript -->
            </div>

            <button id="generate-url-btn" class="btn btn-success mt-3 mb-2">Generate MOSLA URL</button>
            
            <div class="form-group">
                <label for="generated-mosla-url">Generated URL:</label>
                <textarea id="generated-mosla-url" class="form-control" rows="3" readonly></textarea>
            </div>
            <a id="open-generated-url-in-demo" href="#" class="btn btn-info mb-3" target="_blank" style="display:none;">Open Generated URL in Demo</a>
        </div>

        <div class="section bg-light" id="faq">
            <h2>Frequently Asked Questions</h2>
            <div class="accordion" id="faqAccordion">
                <div class="card">
                    <div class="card-header" id="headingOne">
                        <h5 class="mb-0">
                            <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                Why not just use an existing EULA template?
                            </button>
                        </h5>
                    </div>
                    <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#faqAccordion">
                        <div class="card-body">
                            You certainly can. MOSLA's goal isn't to replace all existing agreements but to offer a rigid, standardized framework for common web and application clauses, making them easier to understand and manage.
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header" id="headingTwo">
                        <h5 class="mb-0">
                            <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                What if I need custom clauses not in MOSLA?
                            </button>
                        </h5>
                    </div>
                    <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#faqAccordion">
                        <div class="card-body">
                            MOSLA uses a committee process to add or update approved clauses. This ensures all clauses are standardized and vetted. If you need a new clause, you can submit it to the community for review and potential inclusion.
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header" id="headingThree">
                        <h5 class="mb-0">
                            <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                How are existing clauses updated?
                            </button>
                        </h5>
                    </div>
                    <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#faqAccordion">
                        <div class="card-body">
                            When a clause needs an update, it goes through a versioning process (e.g., A17.01 becomes A17.02). Draft versions (A17.02x1 for experimental, A17.02c for candidate) are reviewed before a new version is finalized. Older versions remain valid and available.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>&copy; <script>document.write(new Date().getFullYear())</script> MOSLA - Deftio. All rights reserved. <a href="https://www.deftio.com/mosla" style="color:white;">Deftio MOSLA Page</a></p>
        <p><a href="https://opensource.org/licenses/BSD-2-Clause"><img src="https://img.shields.io/badge/License-BSD%202--Clause-blue.svg" alt="License" /></a></p>
        <p>Contributors: Manjirnath A Chatterjee, Kona F Pance</p>
    </footer>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const clauseLibraryDisplay = document.getElementById('clause-library-display');
            const clauseLoadError = document.getElementById('clause-load-error');
            const party1Input = document.getElementById('party1-name');
            const party2Input = document.getElementById('party2-name');
            const generateUrlBtn = document.getElementById('generate-url-btn');
            const generatedUrlTextarea = document.getElementById('generated-mosla-url');
            const openGeneratedUrlLink = document.getElementById('open-generated-url-in-demo');
            const selectAllCheckbox = document.getElementById('select-all-clauses');

            function displayError(message) {
                clauseLoadError.textContent = 'Error: ' + message;
                clauseLoadError.style.display = 'block';
                clauseLibraryDisplay.innerHTML = ''; // Clear any partial content
            }

            function displayClauses(clausesData) {
                if (!clausesData || !clausesData.clauses || !Array.isArray(clausesData.clauses)) {
                    displayError('Clause data is not in the expected format or is missing.');
                    return;
                }
                clauseLibraryDisplay.innerHTML = ''; // Clear previous content or loading messages

                clausesData.clauses.forEach((clause, index) => {
                    const cardHtml = `
                        <div class="col-md-6 col-lg-4 mb-3">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">${clause['clause-name'] || 'Unnamed Clause'}</h5>
                                    <h6 class="card-subtitle mb-2 text-muted">ID: ${clause['clause-ID'] || 'N/A'}</h6>
                                    <p class="card-text">${clause['clause-short-desc'] || 'No short description available.'}</p>
                                    <div class="form-check">
                                        <input class="form-check-input clause-checkbox" type="checkbox" value="${clause['clause-ID']}" id="clause-check-${index}">
                                        <label class="form-check-label" for="clause-check-${index}">
                                            Select this clause
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    clauseLibraryDisplay.insertAdjacentHTML('beforeend', cardHtml);
                });
            }

            async function fetchClauses() {
                try {
                    const response = await fetch('./mosla-terms.json');
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status} while fetching mosla-terms.json`);
                    }
                    const clausesData = await response.json();
                    displayClauses(clausesData);
                } catch (error) {
                    console.error('Failed to fetch or parse clauses:', error);
                    displayError(error.message || 'Could not load clauses from mosla-terms.json.');
                }
            }

            function generateUrl() {
                const selectedClauses = [];
                document.querySelectorAll('.clause-checkbox:checked').forEach(checkbox => {
                    selectedClauses.push(checkbox.value);
                });

                const party1 = encodeURIComponent(party1Input.value.trim());
                const party2 = encodeURIComponent(party2Input.value.trim());
                const terms = selectedClauses.join('+');

                if (!terms) {
                    generatedUrlTextarea.value = 'Please select at least one clause.';
                    openGeneratedUrlLink.style.display = 'none';
                    return;
                }

                const baseUrl = './MOSLA.html';
                const finalUrl = `${baseUrl}?terms=${terms}${party1 ? '&party1=' + party1 : ''}${party2 ? '&party2=' + party2 : ''}`;
                
                generatedUrlTextarea.value = finalUrl;
                openGeneratedUrlLink.href = finalUrl;
                openGeneratedUrlLink.style.display = 'inline-block';
            }
            
            function toggleSelectAll() {
                const checkboxes = document.querySelectorAll('.clause-checkbox');
                checkboxes.forEach(checkbox => {
                    checkbox.checked = selectAllCheckbox.checked;
                });
            }

            fetchClauses(); // Initial fetch of clauses
            generateUrlBtn.addEventListener('click', generateUrl);
            selectAllCheckbox.addEventListener('change', toggleSelectAll);
        });
    </script>
</body>
</html>
